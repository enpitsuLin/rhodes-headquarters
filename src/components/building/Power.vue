<script setup lang="ts">
import Base from './Base.vue'
import ResidentCharacter from './ResidentCharacter.vue'
import type { BuildingPower } from '~/types'

const props = defineProps<{ data: BuildingPower }>()

const power = computed(() => {
  return 2 ** (props.data.level - 1) * 60 + (2 ** (props.data.level - 1) - 1) * 10
})
</script>

<template>
  <Base title="发电站" :level="data.level" color="#d1eb64">
    <template #icon>
      <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_502_946)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M29.6943 -2.28332C28.0271 -3.23889 25.9729 -3.23889 24.3057 -2.28332L-3.3057 13.542C-4.97294 14.4976 -6 16.2635 -6 18.1747V49.8253C-6 51.7365 -4.97294 53.5024 -3.3057 54.458L24.3057 70.2833C25.9729 71.2389 28.0271 71.2389 29.6943 70.2833L57.3057 54.458C58.9729 53.5024 60 51.7365 60 49.8253V18.1747C60 16.2635 58.9729 14.4976 57.3057 13.542L29.6943 -2.28332ZM55.0378 16.4452L27.9622 0.927022C27.3668 0.585747 26.6332 0.585746 26.0378 0.927021L-1.03775 16.4452C-1.63319 16.7865 -2 17.4172 -2 18.0997V49.1361C-2 49.8186 -1.63319 50.4493 -1.03775 50.7906L26.0378 66.3088C26.6332 66.6501 27.3668 66.6501 27.9622 66.3088L55.0378 50.7906C55.6332 50.4493 56 49.8186 56 49.1361V18.0997C56 17.4172 55.6332 16.7865 55.0378 16.4452Z" fill="#44464B" />
          <path d="M29.5 40L33 34L29.5 28H22.5L19 34L22.5 40H29.5Z" fill="#44464B" />
          <path d="M41.1404 33.5394L44.6404 27.5394L41.1404 21.5394H34.1404L30.6404 27.5394L34.1404 33.5394H41.1404Z" fill="#44464B" />
          <path d="M41.1404 46.5L44.6404 40.5L41.1404 34.5H34.1404L30.6404 40.5L34.1404 46.5H41.1404Z" fill="#44464B" />
          <path d="M29.5 26.7812L33 20.7812L29.5 14.7812H22.5L19 20.7812L22.5 26.7812H29.5Z" fill="#44464B" />
          <path d="M29.5 52.9131L33 46.9131L29.5 40.9131H22.5L19 46.9131L22.5 52.9131H29.5Z" fill="#44464B" />
          <path d="M18.0522 46.5L21.5522 40.5L18.0522 34.5H11.0522L7.55225 40.5L11.0522 46.5H18.0522Z" fill="#44464B" />
          <path d="M18.0522 33.5393L21.5522 27.5393L18.0522 21.5393H11.0522L7.55225 27.5393L11.0522 33.5393H18.0522Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M19.4807 59.1759C21.5641 59.7138 23.7486 60 26 60C28.2514 60 30.4359 59.7138 32.5193 59.1759L29.5 54H22.5L19.4807 59.1759Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M33.7666 58.8202C37.715 57.586 41.2586 55.4356 44.1486 52.6179L41.1404 47.4609H34.1404L30.6404 53.4609L33.7666 58.8202Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M44.7953 51.9649C47.7254 48.9002 49.9135 45.1201 51.0709 40.9131H45.3484L41.8484 46.9131L44.7953 51.9649Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M51.3043 40H45.3484L41.8484 34L45.3484 28H51.3043C51.7592 29.9261 52 31.9349 52 34C52 36.0651 51.7592 38.0739 51.3043 40Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M50.9848 26.7812H45.3484L41.8484 20.7812L44.6843 15.9197C47.5986 18.9307 49.7916 22.6441 50.9848 26.7812Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M43.8316 15.0781L40.7808 20.3081H33.7808L30.2808 14.3081L33.3466 9.05243C37.3195 10.2205 40.8972 12.3118 43.8316 15.0781Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M32.5193 8.82408L29.5 14H22.5L19.4807 8.82408C21.5641 8.28616 23.7486 8 26 8C28.2514 8 30.436 8.28616 32.5193 8.82408Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M21.5522 14.6262L18.0522 20.6262H11.0522L7.94191 15.2942C10.8447 12.4913 14.3981 10.3579 18.3535 9.14261L21.5522 14.6262Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.524 21.0869L7.02405 27.0869H0.929091C2.11695 22.7694 4.39025 18.9015 7.43713 15.7951L10.524 21.0869Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.524 34L7.02405 40H0.695727C0.240755 38.0739 0 36.0651 0 34C0 31.9349 0.240755 29.9261 0.695728 28H7.02405L10.524 34Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M0.92909 40.9131C2.11695 45.2306 4.39024 49.0985 7.43713 52.2049L10.524 46.9131L7.02405 40.9131H0.92909Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M51.3043 40C51.7592 38.0739 52 36.0651 52 34C52 31.9349 51.7592 29.9261 51.3043 28H45.3484L41.8484 34L45.3484 40H51.3043ZM51.0709 40.9131H45.3484L41.8484 46.9131L44.7953 51.9649C47.7254 48.9002 49.9135 45.1201 51.0709 40.9131ZM44.1486 52.6179L41.1404 47.4609H34.1404L30.6404 53.4609L33.7666 58.8202C37.715 57.586 41.2586 55.4356 44.1486 52.6179ZM32.5193 59.1759L29.5 54H22.5L19.4807 59.1759C21.5641 59.7138 23.7486 60 26 60C28.2514 60 30.4359 59.7138 32.5193 59.1759ZM18.7541 58.9769L21.9718 53.4609L18.4718 47.4609H11.4718L8.24454 52.9934C11.1894 55.7475 14.7753 57.8247 18.7541 58.9769ZM7.43713 52.2049L10.524 46.9131L7.02405 40.9131H0.92909C2.11695 45.2306 4.39024 49.0985 7.43713 52.2049ZM0.695727 40C0.240755 38.0739 0 36.0651 0 34C0 31.9349 0.240755 29.9261 0.695728 28H7.02405L10.524 34L7.02405 40H0.695727ZM0.929091 27.0869H7.02405L10.524 21.0869L7.43713 15.7951C4.39025 18.9015 2.11695 22.7694 0.929091 27.0869ZM7.94191 15.2942L11.0522 20.6262H18.0522L21.5522 14.6262L18.3535 9.14261C14.3981 10.3579 10.8447 12.4913 7.94191 15.2942ZM19.4807 8.82408L22.5 14H29.5L32.5193 8.82408C30.436 8.28616 28.2514 8 26 8C23.7486 8 21.5641 8.28616 19.4807 8.82408ZM33.3466 9.05243L30.2808 14.3081L33.7808 20.3081H40.7808L43.8316 15.0781C40.8972 12.3118 37.3195 10.2205 33.3466 9.05243ZM44.6843 15.9197L41.8484 20.7812L45.3484 26.7812H50.9848C49.7916 22.6441 47.5986 18.9307 44.6843 15.9197ZM29.5 40L33 34L29.5 28H22.5L19 34L22.5 40H29.5ZM41.1404 33.5394L44.6404 27.5394L41.1404 21.5394H34.1404L30.6404 27.5394L34.1404 33.5394H41.1404ZM41.1404 46.5L44.6404 40.5L41.1404 34.5H34.1404L30.6404 40.5L34.1404 46.5H41.1404ZM29.5 26.7812L33 20.7812L29.5 14.7812H22.5L19 20.7812L22.5 26.7812H29.5ZM29.5 52.9131L33 46.9131L29.5 40.9131H22.5L19 46.9131L22.5 52.9131H29.5ZM18.0522 46.5L21.5522 40.5L18.0522 34.5H11.0522L7.55225 40.5L11.0522 46.5H18.0522ZM18.0522 33.5393L21.5522 27.5393L18.0522 21.5393H11.0522L7.55225 27.5393L11.0522 33.5393H18.0522Z" fill="#44464B" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M8.24454 52.9934C11.1894 55.7475 14.7753 57.8247 18.7541 58.9769L21.9718 53.4609L18.4718 47.4609H11.4718L8.24454 52.9934Z" fill="#44464B" />
        </g>
        <defs>
          <clipPath id="clip0_502_946">
            <rect width="60" height="60" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </template>
    <template #info>
      <div w-full flex="~ items-center justify-between">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5 10V9.85355C5 9.62718 4.91007 9.41007 4.75 9.25C4.58993 9.08993 4.5 8.87282 4.5 8.64645V8.35355C4.5 8.12718 4.58993 7.91007 4.75 7.75C4.91007 7.58993 5 7.37282 5 7.14645V7C5 6.67986 4.87282 6.37282 4.64645 6.14645L3.06066 4.56066C2.47487 3.97487 1.52513 3.97487 0.93934 4.56066L0.603553 4.89645C0.537249 4.96275 0.447322 5 0.353553 5C0.158291 5 0 4.84171 0 4.64645C0 4.55268 0.0372492 4.46275 0.103553 4.39645L3.89645 0.603553C3.96275 0.537249 4.05268 0.5 4.14645 0.5C4.34171 0.5 4.5 0.658291 4.5 0.853553C4.5 0.947322 4.46275 1.03725 4.39645 1.10355L4.06066 1.43934C3.47487 2.02513 3.47487 2.97487 4.06066 3.56066L4.91421 4.41421C5.28929 4.78929 5.79799 5 6.32843 5H7.29289C7.4255 5 7.55268 4.94732 7.64645 4.85355C7.84171 4.65829 8.15829 4.65829 8.35355 4.85355C8.44732 4.94732 8.5745 5 8.70711 5H9.67157C10.202 5 10.7107 4.78929 11.0858 4.41421L11.9393 3.56066C12.5251 2.97487 12.5251 2.02513 11.9393 1.43934L11.6036 1.10355C11.5372 1.03725 11.5 0.947322 11.5 0.853553C11.5 0.658291 11.6583 0.5 11.8536 0.5C11.9473 0.5 12.0372 0.537249 12.1036 0.603553L15.8964 4.39645C15.9628 4.46275 16 4.55268 16 4.64645C16 4.84171 15.8417 5 15.6464 5C15.5527 5 15.4628 4.96275 15.3964 4.89645L15.0607 4.56066C14.4749 3.97487 13.5251 3.97487 12.9393 4.56066L11.3536 6.14645C11.1272 6.37282 11 6.67986 11 7V7.14645C11 7.37282 11.0899 7.58993 11.25 7.75C11.4101 7.91007 11.5 8.12718 11.5 8.35355V8.64645C11.5 8.87282 11.4101 9.08993 11.25 9.25C11.0899 9.41007 11 9.62718 11 9.85355V10C11 10.3201 11.1272 10.6272 11.3536 10.8536L12.9393 12.4393C13.5251 13.0251 14.4749 13.0251 15.0607 12.4393L15.3964 12.1036C15.4628 12.0372 15.5527 12 15.6464 12C15.8417 12 16 12.1583 16 12.3536C16 12.4473 15.9628 12.5372 15.8964 12.6036L12.1036 16.3964C12.0372 16.4628 11.9473 16.5 11.8536 16.5C11.6583 16.5 11.5 16.3417 11.5 16.1464C11.5 16.0527 11.5372 15.9628 11.6036 15.8964L11.9393 15.5607C12.5251 14.9749 12.5251 14.0251 11.9393 13.4393L10.5303 12.0303C10.1908 11.6908 9.73022 11.5 9.25 11.5H8.70711C8.5745 11.5 8.44732 11.5527 8.35355 11.6464C8.15829 11.8417 7.84171 11.8417 7.64645 11.6464C7.55268 11.5527 7.4255 11.5 7.29289 11.5H6.75C6.26978 11.5 5.80923 11.6908 5.46967 12.0303L4.06066 13.4393C3.47487 14.0251 3.47487 14.9749 4.06066 15.5607L4.39645 15.8964C4.46275 15.9628 4.5 16.0527 4.5 16.1464C4.5 16.3417 4.34171 16.5 4.14645 16.5C4.05268 16.5 3.96275 16.4628 3.89645 16.3964L0.103553 12.6036C0.0372493 12.5372 0 12.4473 0 12.3536C0 12.1583 0.158291 12 0.353553 12C0.447322 12 0.537249 12.0372 0.603553 12.1036L0.93934 12.4393C1.52513 13.0251 2.47487 13.0251 3.06066 12.4393L4.64645 10.8536C4.87282 10.6272 5 10.3201 5 10Z" fill="#DC92FF" />
          <path d="M16 12.5V13.5H13V16.5H12V13.5H9V12.5H12V9.5H13V12.5H16Z" fill="#DC92FF" stroke="black" stroke-width="0.1" />
        </svg>
        <span class="text-#d195f9" title="干员加成计算实现中...">
          +5%(?)
        </span>
      </div>
      <div w-full flex="~ items-center justify-between">
        <svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g filter="url(#filter0_d_504_821)">
            <path d="M10.5 2C10.5 1.72386 10.7239 1.5 11 1.5H13C13.2761 1.5 13.5 1.72386 13.5 2C13.5 2.27614 13.2761 2.5 13 2.5H11C10.7239 2.5 10.5 2.27614 10.5 2Z" fill="#CAEC46" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 3H11V8.25L13.75 5.75L12.25 8.5H15L11 12.5V15H15C15.5523 15 16 14.5523 16 14V4C16 3.44772 15.5523 3 15 3Z" fill="#CAEC46" />
          </g>
          <g filter="url(#filter1_d_504_821)">
            <path d="M6.5 2C6.5 1.72386 6.72386 1.5 7 1.5H9C9.27614 1.5 9.5 1.72386 9.5 2C9.5 2.27614 9.27614 2.5 9 2.5H7C6.72386 2.5 6.5 2.27614 6.5 2Z" fill="#CAEC46" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11 3H7V8.25L9.75 5.75L8.25 8.5H11L7 12.5V15H11C11.5523 15 12 14.5523 12 14V4C12 3.44772 11.5523 3 11 3Z" fill="#CAEC46" />
          </g>
          <g filter="url(#filter2_d_504_821)">
            <path d="M2.5 2C2.5 1.72386 2.72386 1.5 3 1.5H5C5.27614 1.5 5.5 1.72386 5.5 2C5.5 2.27614 5.27614 2.5 5 2.5H3C2.72386 2.5 2.5 2.27614 2.5 2Z" fill="#CAEC46" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M1 3H7C7.55229 3 8 3.44772 8 4V14C8 14.5523 7.55229 15 7 15H1C0.447715 15 0 14.5523 0 14V4C0 3.44772 0.447715 3 1 3ZM7 8.5L2.5 13L4 10H1.5L5.75 5.75L4.25 8.5H7Z" fill="#CAEC46" />
          </g>
          <defs>
            <filter id="filter0_d_504_821" x="6.5" y="1.5" width="13.5" height="21.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
              <feOffset dy="4" />
              <feGaussianBlur stdDeviation="2" />
              <feComposite in2="hardAlpha" operator="out" />
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_504_821" />
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_504_821" result="shape" />
            </filter>
            <filter id="filter1_d_504_821" x="6.5" y="1.5" width="6.5" height="13.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
              <feOffset dx="1" />
              <feComposite in2="hardAlpha" operator="out" />
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_504_821" />
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_504_821" result="shape" />
            </filter>
            <filter id="filter2_d_504_821" x="0" y="1.5" width="9" height="13.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
              <feOffset dx="1" />
              <feComposite in2="hardAlpha" operator="out" />
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_504_821" />
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_504_821" result="shape" />
            </filter>
          </defs>
        </svg>
        <span class="text-#caec46">
          {{ power }}
        </span>
      </div>
    </template>
    <ResidentCharacter
      v-for="i in data.chars"
      :key="i.charId"
      :resident="i"
    />
  </Base>
</template>
