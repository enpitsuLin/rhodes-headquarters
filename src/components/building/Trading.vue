<script setup lang="ts">
import Base from './Base.vue'
import ResidentCharacter from './ResidentCharacter.vue'
import type { BuildingTrading } from '~/types'

defineProps<{ data: BuildingTrading }>()
</script>

<template>
  <Base title="贸易站" :level="data.level" color="#5ab8f9">
    <template #icon>
      <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_502_914)">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M29.6943 -2.28332C28.0271 -3.23889 25.9729 -3.23889 24.3057 -2.28332L-3.3057 13.542C-4.97294 14.4976 -6 16.2635 -6 18.1747V49.8253C-6 51.7365 -4.97294 53.5024 -3.3057 54.458L24.3057 70.2833C25.9729 71.2389 28.0271 71.2389 29.6943 70.2833L57.3057 54.458C58.9729 53.5024 60 51.7365 60 49.8253V18.1747C60 16.2635 58.9729 14.4976 57.3057 13.542L29.6943 -2.28332ZM55.0377 16.4452L27.9622 0.927022C27.3668 0.585747 26.6332 0.585747 26.0378 0.927021L-1.03775 16.4452C-1.63319 16.7865 -2 17.4172 -2 18.0997V49.1361C-2 49.8186 -1.63319 50.4493 -1.03775 50.7906L26.0378 66.3088C26.6332 66.6501 27.3668 66.6501 27.9622 66.3088L55.0377 50.7906C55.6332 50.4493 56 49.8186 56 49.1361V18.0997C56 17.4172 55.6332 16.7865 55.0377 16.4452Z" fill="#44464B" />
          <path d="M27.3849 32.536C27.3849 32.3814 27.4788 32.242 27.6227 32.1829L49.1771 23.3288C49.4305 23.2247 49.7091 23.4096 49.7091 23.6819V47.1335C49.7091 47.2802 49.6246 47.4139 49.4916 47.4776L27.9372 57.8074C27.6816 57.9299 27.3849 57.7451 27.3849 57.4633V32.536Z" fill="#44464B" />
          <path d="M25.4604 32.3449C25.4604 32.1903 25.3666 32.051 25.2227 31.9919L3.66828 23.1378C3.41487 23.0337 3.13621 23.2186 3.13621 23.4908V46.9425C3.13621 47.0891 3.22075 47.2228 3.35378 47.2866L24.9082 57.6164C25.1638 57.7389 25.4604 57.554 25.4604 57.2723V32.3449Z" fill="#44464B" />
          <path d="M34.7395 26.7115L27.7893 30.0847C27.1678 30.3863 26.4429 30.3955 25.8139 30.1097L4.88052 20.5998C4.57811 20.4624 4.58172 20.0346 4.88641 19.9023L12.7026 16.5077C13.1055 16.3326 13.5646 16.3371 13.9641 16.5198L34.7316 26.0212C35.0263 26.156 35.031 26.5701 34.7395 26.7115Z" fill="#44464B" />
          <path d="M49.1733 20.4069L42.223 23.7801C41.6016 24.0817 40.8767 24.0909 40.2477 23.8051L19.3143 14.2952C19.0119 14.1578 19.0155 13.7301 19.3202 13.5977L27.1363 10.2031C27.5393 10.0281 27.9984 10.0325 28.3978 10.2152L49.1654 19.7166C49.46 19.8515 49.4648 20.2655 49.1733 20.4069Z" fill="#44464B" />
        </g>
        <defs>
          <clipPath id="clip0_502_914">
            <rect width="60" height="60" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </template>
    <template #info>
      <div w-full flex="~ items-center justify-between">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M2.28571 16.5V2.21429L0 6.78571H1.14286V16.5H2.28571Z" fill="#25ABDF" />
          <path d="M0.571429 1.64286H16V0.5H0.571429V1.64286Z" fill="#25ABDF" />
          <path d="M12.5714 5.07143H15.4286L13.1429 2.78571H12.5714V5.07143Z" fill="#25ABDF" />
          <path fill-rule="evenodd" clip-rule="evenodd" d="M4 2.78571H12V5.64286H15.4286V16.5H4V2.78571ZM13.1429 12.2143H6.28571V13.0714H13.1429V12.2143ZM6.28571 9.64286H13.1429V10.5H6.28571V9.64286ZM13.1429 7.35714H6.28571V8.21429H13.1429V7.35714Z" fill="#25ABDF" />
        </svg>

        <span>
          <span class="text-#5ab8f9">{{ data.stock.length }}</span>/{{ data.stockLimit }}
        </span>
      </div>
      <div class="text-#5ab8f9">
        {{ data.strategy === 'O_DIAMOND' ? '开采协力' : '龙门商法' }}
      </div>
    </template>

    <ResidentCharacter
      v-for="i in data.chars"
      :key="i.charId"
      :resident="i"
    />
  </Base>
</template>
